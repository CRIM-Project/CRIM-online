{% extends "base.html" %}
{% load markdown %}
{% load shorten %}
{% load static %}

{% block title %}
<title>CRIM | Relationships</title>
{% endblock %}

{% block wrap %}
<div class="row-fluid">
    <div class="span12">
        <div class="show-heading row-fluid">
            <hgroup class="show-title page-title span12">
              <h1>Relationships</h1>
            </hgroup>
        </div>
    </div>
</div>
<div class="row-fluid">
    <div class="span12">
        <table class="table table-striped table-bordered table-hover">
            <tr>
                <th><a href="?order_by=pk">ID</a></th>
                <th><a href="?order_by=observer__name_sort">Observer</a></th>
                <th><a href="?order_by=model_observation__piece__piece_id">Model</a></th>
                <th><a href="?order_by=derivative_observation__piece__piece_id">Derivative</a></th>
                <th>Relationship type</th>
                <!-- <th>Date</th> -->
            </tr>
            {% for relationship in content %}
              <tr>
                <td><a href="{{ relationship.url|htmlsite }}">&lt;R{{ relationship.pk }}&gt;</a></td>
                <td><a href="{{ relationship.observer.url|htmlsite }}">{{ relationship.observer.name }}</a></td>
                <td>
                  <a href="{{ relationship.model_observation.url|htmlsite }}">
                    [{{ relationship.model_observation.piece.piece_id }}]
                    {% if relationship.model_observation.piece.mass %}
                      {{relationship.model_observation.piece.mass.title}}:
                    {% endif %}
                    {{ relationship.model_observation.piece.title }}
                  </a>
                </td>
                <td>
                  <a href="{{ relationship.derivative_observation.url|htmlsite }}">
                    [{{ relationship.derivative_observation.piece.piece_id }}]
                    {% if relationship.derivative_observation.piece.mass %}
                      {{relationship.derivative_observation.piece.mass.title}}:
                    {% endif %}
                    {{ relationship.derivative_observation.piece.title }}
                  </a>
                </td>
                <td>{% if relationship.rt_q %}Quotation{% endif %}
                    {% if relationship.rt_tm %}Mechanical transformation{% endif %}
                    {% if relationship.rt_tnm %}Non-mechanical transformation{% endif %}
                    {% if relationship.rt_nm %}New material{% endif %}
                    {% if relationship.rt_om %}Omission{% endif %}
                </td>
              </tr>
            {% endfor %}
        </table>
    </div>
</div>
{% endblock %}
