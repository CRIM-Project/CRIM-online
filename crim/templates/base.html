<!doctype html>
{% load static %}
{% load flatpages %}
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  {% block title %}
    <title>Citations: The Renaissance Imitation Mass</title>
  {% endblock %}
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">

  <!-- <script src="{% static 'js/vendor/jquery.min.js' %}"></script> -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script src="//code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
  <!-- scripts concatenated and minified via build script -->
  <script src="{% static 'js/bootstrap/bootstrap.min.js' %}"></script>
  <script src="{% static 'js/plugins.js' %}"></script>
  {% block header %}

  {% endblock %}
  <!-- end scripts -->
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet"></link>
  <link href="{% static 'css/bootstrap-responsive.min.css' %}" rel="stylesheet"></link>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link href='https://fonts.googleapis.com/css?family=Crimson+Text:400,400italic,600,600italic' rel='stylesheet' type='text/css'>
  <script src="{% static 'js/vendor/modernizr-2.5.3.min.js' %}"></script>
</head>
<body id="home-page">
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
  <div id="utility-nav" class="navbar">
    <div class="navbar-inner">
      <div class="container-fluid">
        {% if request.user.is_authenticated %}
          <p class="navbar-text pull-right"><i class="icon-user"></i> <a href="/accounts/profile/">My Account</a> | <a href="/accounts/logout/">Logout</a></p>
        {% else %}
          <p class="navbar-text pull-right"><i class="icon-user"></i> <a href="mailto:{{ADMIN_EMAIL}}?subject=Account request">Request account</a> | <a href="/accounts/login/">Login</a></p>
        {% endif %}
      </div>
    </div>
  </div>

  <div id="title-container" class="container-fluid">
    <div class="row-fluid">
      <div class="span12">
        <hgroup class="span8">
          <h1 id="main-title"><a href="/">CRIM</a></h1>
          <h2 id="tagline">Citations: The Renaissance Imitation Mass Project</h2>
        </hgroup>
      </div>
    </div>
  </div>

  <div id="main-nav" class="navbar">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <div class="nav-collapse">
          <ul class="nav">
            {% get_flatpages as flatpages %}
            <li class="dropdown top-level"><a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
              <ul class="dropdown-menu">
                {% for page in flatpages %}
                  <li><a href="/about{{ page.url }}">{{ page.title }}</a></li>
                {% endfor %}
              </ul>
            </li>
            <li class="dropdown top-level"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Documents <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/masses/">Masses</a></li>
                <li><a href="/models/">Models</a></li>
                <li><a href="/pieces/">Pieces (all)</a></li>
                <!-- <li><a href="/genres/">Genres</a></li> -->
                <!-- <li><a href="/treatises/">Treatises</a></li> -->
                <li><a href="/sources/">Sources</a></li>
              </ul>
            </li>
            <li class="dropdown top-level"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Analysis <b class="caret"></b></a>
              <ul class="dropdown-menu">
              <li><a href="/people/">People</a></li>
              <li><a href="/observations/">Observations</a></li>
              <li><a href="/relationships/">Relationships</a></li>
              <li><a href="/citations/">Citation tool</a></li>
              </ul>
            </li>
            <li class="top-level"><a href="/forum/">Forum</a></li>
          </ul>
          <form class="navbar-search pull-right" action="/search" method="get">
            <input type="text" class="nav-search-query span2" placeholder="Search" name="q">
            <a href="/search/" class="advanced-link">Advanced search &raquo;</a>
          </form>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>

  <div id="main" class="container-fluid">
    {% block wrap %}

    {% endblock %}
    <hr />

    <footer id="footer">
    <p class="copyright">
    	<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
        <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" />
      </a>
    </p>
    <p class="copyright">
      Copyright &copy; 2018&ndash;2021 Richard Freedman/Haverford College<br />
      This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>
    </p>
    </footer>
  </div><!--/.fluid-container-->

  <script type="text/javascript">
    // CSRF Token Protection lifted from Django documentation.
    var csrftoken = '{{ csrf_token }}';
    function csrfSafeMethod(method) {
        // these HTTP methods do not require CSRF protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }
    function sameOrigin(url) {
      // test that a given url is a same-origin URL
      // url could be relative or scheme relative or absolute
      var host = document.location.host; // host + port
      var protocol = document.location.protocol;
      var sr_origin = '//' + host;
      var origin = protocol + sr_origin;
      // Allow absolute or scheme relative URLs to same origin
      return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
        (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
        // or any other URL that isn't scheme relative or absolute i.e relative.
        !(/^(\/\/|http:|https:).*/.test(url));
    }
    $.ajaxSetup({
      beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {
          // Send the token to same-origin, relative URLs only.
          // Send the token only if the method warrants CSRF protection
          // Using the CSRFToken value acquired earlier
          xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
      }
    });
  </script>

</body>
</html>
