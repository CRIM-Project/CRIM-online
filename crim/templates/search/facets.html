<h2>Narrow results</h2>
<div class="accordion" id="facet-accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#facet-observer-accordion" href="#collapse_observer">Observer</a>
    </div>
    <div id="collapse_observer" class="accordion-body collapse in">
      <div class="accordion-inner">
        {% for facet_block in facet_results_observer %}
          {% if facet_block.1 %}
            <h4>{{ facet_block.0 }}</h4>
            <ul class="unstyled">
              {% for facet_item in facet_block.1 %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="{{ facet_item.1 }}" value="{{ facet_item.0 }}" />{{ facet_item.0 }} {% if facet_item.2 %}({{ facet_item.2 }}){% endif %}
                  </label>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#facet-model-accordion" href="#collapse_model">Model</a>
    </div>
    <div id="collapse_model" class="accordion-body collapse in">
      <div class="accordion-inner">
        {% for facet_block in facet_results_model %}
          {% if facet_block.1 %}
            <h4>{{ facet_block.0 }}</h4>
            <ul class="unstyled">
              {% for facet_item in facet_block.1 %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="{{ facet_item.1 }}" value="{{ facet_item.0 }}" />{{ facet_item.0 }} {% if facet_item.2 %}({{ facet_item.2 }}){% endif %}
                  </label>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#facet-derivative-accordion" href="#collapse_derivative">Derivative</a>
    </div>
    <div id="collapse_derivative" class="accordion-body collapse in">
      <div class="accordion-inner">
        {% for facet_block in facet_results_derivative %}
          {% if facet_block.1 %}
            <h4>{{ facet_block.0 }}</h4>
            <ul class="unstyled">
              {% for facet_item in facet_block.1 %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="{{ facet_item.1 }}" value="{{ facet_item.0 }}" />{{ facet_item.0 }} {% if facet_item.2 %}({{ facet_item.2 }}){% endif %}
                  </label>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#facet-rt-accordion" href="#collapse_rt">Relationship type</a>
    </div>
    <div id="collapse_rt" class="accordion-body collapse in">
      <div class="accordion-inner">
        {% if type_facets.rt_q_b.true %}
          <h4>Quotation</h4>
          <ul class="unstyled">
            {% if not request.GET|dictkey:'rt-q-x' and not request.GET|dictkey:'rt-q-monnayage' %}
              <li>
                <label class="checkbox">
                  <input class="facet-refine" type="checkbox" name="rt-q" value="true" />Any ({{ type_facets.rt_q_b.true }})
                </label>
              </li>
            {% endif %}
            {% if request.GET|dictkey:'rt-q' %}
              {% if type_facets.rt_q_x_b.true %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="rt-q-x" value="true" />Exact ({% if type_facets.rt_q_x_b.true %}{{ type_facets.rt_q_x_b.true }}{% else %}0{% endif %})
                  </label>
                </li>
              {% endif %}
              {% if type_facets.rt_q_monnayage_b.true %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="rt-q-monnayage" value="true" />Monnayage ({% if type_facets.rt_q_monnayage_b.true %}{{ type_facets.rt_q_monnayage_b.true }}{% else %}0{% endif %})
                  </label>
                </li>
              {% endif %}
            {% endif %}
          </ul>
        {% endif %}
        {% if type_facets.rt_tm_b.true %}
          <h4>Mechanical transformation</h4>
          <ul class="unstyled">
            {% if not request.GET|dictkey:'rt_tm_snd_b' and not request.GET|dictkey:'rt_tm_minv_b' and not request.GET|dictkey:'rt_tm_retrograde_b' and not request.GET|dictkey:'rt_tm_ms_b' and not request.GET|dictkey:'rt_tm_transposed_b' and not request.GET|dictkey:'rt_tm_invertible_b' %}
              <li>
                <label class="checkbox">
                  <input class="facet-refine" type="checkbox" name="rt-tm" value="true" />Any ({{ type_facets.rt_tm_b.true }})
                </label>
              </li>
            {% endif %}
            {% if request.GET|dictkey:'rt-tm' %}
              {% if type_facets.rt_tm_snd_b.true %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="rt-tm-snd" value="true" />Sounding in different voice(s) ({% if type_facets.rt_tm_snd_b.true %}{{ type_facets.rt_tm_snd_b.true }}{% else %}0{% endif %})
                  </label>
                </li>
              {% endif %}
              {% if type_facets.rt_tm_minv_b.true %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="rt-tm-minv" value="true" />Melodically inverted ({% if type_facets.rt_tm_minv_b.true %}{{ type_facets.rt_tm_minv_b.true }}{% else %}0{% endif %})
                  </label>
                </li>
              {% endif %}
              {% if type_facets.rt_tm_retrograde_b.true %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="rt-tm-retrograde" value="true" />Retrograde ({% if type_facets.rt_tm_retrograde_b.true %}{{ type_facets.rt_tm_retrograde_b.true }}{% else %}0{% endif %})
                  </label>
                </li>
              {% endif %}
              {% if type_facets.rt_tm_ms_b.true %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="rt-tm-ms" value="true" />Metrically shifted ({% if type_facets.rt_tm_ms_b.true %}{{ type_facets.rt_tm_ms_b.true }}{% else %}0{% endif %})
                  </label>
                </li>
              {% endif %}
              {% if type_facets.rt_tm_transposed_b.true %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="rt-tm-transposed" value="true" />Transposed ({% if type_facets.rt_tm_transposed_b.true %}{{ type_facets.rt_tm_transposed_b.true }}{% else %}0{% endif %})
                  </label>
                </li>
              {% endif %}
              {% if type_facets.rt_tm_invertible_b.true %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="rt-tm-invertible" value="true" />Invertible ({% if type_facets.rt_tm_invertible_b.true %}{{ type_facets.rt_tm_invertible_b.true }}{% else %}0{% endif %})
                  </label>
                </li>
              {% endif %}
            {% endif %}
          </ul>
        {% endif %}
      </div>
    </div>
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#facet-model-mt-accordion" href="#collapse_model_mt">Model&rsquo;s musical type</a>
    </div>
    <div id="collapse_model_mt" class="accordion-body collapse in">
      <div class="accordion-inner">
        {% for facet_block in facet_results_model_mt %}
          {% if facet_block.1 %}
            <h4>{{ facet_block.0 }}</h4>
            <ul class="unstyled">
              {% for facet_item in facet_block.1 %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="{{ facet_item.1 }}" value="{{ facet_item.0 }}" />{{ facet_item.0 }} {% if facet_item.2 %}({{ facet_item.2 }}){% endif %}
                  </label>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#facet-derivative-mt-accordion" href="#collapse_derivative_mt">Derivative&rsquo;s musical type</a>
    </div>
    <div id="collapse_derivative_mt" class="accordion-body collapse in">
      <div class="accordion-inner">
        {% for facet_block in facet_results_derivative_mt %}
          {% if facet_block.1 %}
            <h4>{{ facet_block.0 }}</h4>
            <ul class="unstyled">
              {% for facet_item in facet_block.1 %}
                <li>
                  <label class="checkbox">
                    <input class="facet-refine" type="checkbox" name="{{ facet_item.1 }}" value="{{ facet_item.0 }}" />{{ facet_item.0 }} {% if facet_item.2 %}({{ facet_item.2 }}){% endif %}
                  </label>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function ($) {
    attachFacetActions();
  });
</script>
