{% extends "base.html" %}

{% block title %}
<title>CRIM | {% if query %}Search results{% else %}Search{% endif %}</title>
{% endblock %}

{% block header %}
  <script type="text/javascript">
    $(document).ready(function ($) {
    	  fetchPieceResults();
    	  fetchRelationshipResults();
    	  fetchFacets();
      $("#search-form").on({
        'submit': function(event) {
          $(':input[value="None"]', $("#search-form")).each(function(){
            $(this).attr('disabled', true);
          })
        }
      })
    });
  </script>
{% endblock %}

{% block wrap %}
  <div class="row-fluid">
    <div class="span12">
      <div class="search-heading row-fluid">
        <h1 class="search-title page-title">Advanced search</h1>
        <p>Returns relationships matching <strong>all</strong> of the selected features.</p>
      </div>
      <div class="row-fluid">
        <div class="search-container content-container">
          <form id="search-form" action="/search" method="get">
            <h3>All fields</h3>
            <input type="text" name="q" class="search-input"/>
            <div>
              {% include "search/blocks/observer.html" %}
              <h3>Relationship types</h3>
              <div class="row-fluid">
                {% include "search/blocks/rt_q.html" %}
                {% include "search/blocks/rt_tm.html" %}
                {% include "search/blocks/rt_tnm.html" %}
                {% include "search/blocks/rt_misc.html" %}
                
              </div>
            </div>
            <div class="search-buttons">
              <button id="search-submit" type="submit" class="btn btn-large btn-inverse">Search</button>
              <button id="search-reset" type="reset" class="btn btn-large">Clear</button>
            </div>
          </form>
        </div><!--/span-->
      </div><!--/row-->
    </div><!--/span-->
  </div><!--/row-->
{% endblock %}
