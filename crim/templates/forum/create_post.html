{% extends 'base.html' %}

{% load static %}

{% block header %}
<link rel="stylesheet" href="{% static 'css/forum.css' %}">
{% endblock %}

{% block wrap %}
<form id="forum-post-form" action="{% url 'create_forum_post' %}" method="POST">
  <h1>Create a new forum post</h1>
  {% csrf_token %}
  <label for="id_title">Title</label>
  <input type="text" name="title" id="id_title" required maxlength="100">
  <label for="id_body">Body</label>
  <textarea name="body" cols="40" rows="10" required id="id_body"></textarea>
  <input type="submit" value="Submit" disabled>
</form>

<script>
// Disable the submit button whenever either title or body are empty.
let submit = document.querySelector("#forum-post-form input[type='submit']");
let titleInput = document.getElementById("id_title");
let textarea = document.getElementById("id_body");

function onFormChange() {
  if (textarea.value.trim() === "" || titleInput.value.trim() === "") {
    submit.disabled = true;
  } else {
    submit.disabled = false;
  }
}

textarea.addEventListener("input", onFormChange);
titleInput.addEventListener("input", onFormChange);
</script>
{% endblock %}
